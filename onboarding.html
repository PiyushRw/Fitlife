<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onboarding  FitLife</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    input, select {
      background-color: #121212 !important;
      color: white !important;
    }
    input:focus, select:focus {
      outline: none;
      background-color: #121212 !important;
    }
    input:hover, select:hover {
      background-color: #121212 !important;
    }
    input:active, select:active {
      background-color: #121212 !important;
    }
    input:visited, select:visited {
      background-color: #121212 !important;
    }
    input:autofill, select:autofill {
      background-color: #121212 !important;
      box-shadow: 0 0 0 1000px #121212 inset !important;
      -webkit-box-shadow: 0 0 0 1000px #121212 inset !important;
      -webkit-text-fill-color: white !important;
    }
    
    /* Remove spinner from number inputs */
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    
    input[type="number"] {
      appearance: textfield;
      -moz-appearance: textfield;
    }

    .error-message {
      color: #ff6b6b;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }

    /* Custom dropdown styles */
    .dropdown-container {
      position: relative;
    }
    
    .dropdown-button {
      width: 100%;
      padding: 0.75rem;
      background-color: #121212;
      color: white;
      border: 1px solid #4b5563;
      border-radius: 0.75rem;
      text-align: left;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .dropdown-button:hover {
      background-color: #1a1a1a;
    }
    
    .dropdown-options {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: #1e1e1e;
      border: 1px solid #4b5563;
      border-radius: 0.75rem;
      margin-top: 0.25rem;
      max-height: 200px;
      overflow-y: auto;
      z-index: 1000;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    }
    
    .dropdown-option {
      padding: 0.75rem;
      cursor: pointer;
      border-radius: 0.5rem;
      margin: 0.25rem;
      transition: background-color 0.2s;
    }
    
    .dropdown-option:hover {
      background-color: #2a2a2a;
    }
    
    .dropdown-option.selected {
      background-color: #62E0A1;
      color: #000;
    }
    
    /* Custom scrollbar styling for dropdowns */
    .dropdown-options::-webkit-scrollbar {
      width: 8px;
    }
    
    .dropdown-options::-webkit-scrollbar-track {
      background: #1e1e1e;
      border-radius: 4px;
    }
    
    .dropdown-options::-webkit-scrollbar-thumb {
      background: #4b5563;
      border-radius: 4px;
    }
    
    .dropdown-options::-webkit-scrollbar-thumb:hover {
      background: #6b7280;
    }
    
    /* Firefox scrollbar styling */
    .dropdown-options {
      scrollbar-width: thin;
      scrollbar-color: #4b5563 #1e1e1e;
    }
  </style>
</head>
<body class="bg-[#121212] text-white flex items-center justify-center min-h-screen font-sans px-4">
  <div class="w-full max-w-xl bg-[#1E1E1E] rounded-xl shadow-xl p-8 space-y-8">
    
    <!-- Progress Bar -->
    <div class="w-full bg-gray-700 rounded-full h-2">
      <div id="progress" class="bg-[#62E0A1] h-2 rounded-full transition-all duration-300" style="width: 0%;"></div>
    </div>

    <!-- Step Container -->
    <div id="steps" class="space-y-6">
      <!-- Step 1 -->
      <div class="step" id="step1">
        <label class="block mb-2 text-sm">What's your name?</label>
        <input type="text" id="name" class="w-full p-3 rounded-xl border border-gray-600" placeholder="e.g. John">
        <div id="name-error" class="error-message hidden"></div>

        <label class="block mt-4 mb-2 text-sm">Select your age range</label>
        <div class="dropdown-container">
          <button type="button" class="dropdown-button" onclick="toggleDropdown('age')">
            <span id="age-display">Select age range</span>
            <span class="text-gray-400">⌄</span>
          </button>
          <div id="age-dropdown" class="dropdown-options hidden">
            <div class="dropdown-option" onclick="selectDropdownOption('age', 'Under 18')">Under 18</div>
            <div class="dropdown-option" onclick="selectDropdownOption('age', '18–30')">18–30</div>
            <div class="dropdown-option" onclick="selectDropdownOption('age', '31–45')">31–45</div>
            <div class="dropdown-option" onclick="selectDropdownOption('age', '46–60')">46–60</div>
            <div class="dropdown-option" onclick="selectDropdownOption('age', '60+')">60+</div>
          </div>
        </div>
        <div id="age-error" class="error-message hidden"></div>

        <label class="block mt-4 mb-2 text-sm">Your Weight (in kg)</label>
        <input type="number" id="weight" class="w-full p-3 rounded-xl border border-gray-600" placeholder="e.g. 70">
        <div id="weight-error" class="error-message hidden"></div>

        <label class="block mt-4 mb-2 text-sm">Your Height (in cm)</label>
        <input type="number" id="height" class="w-full p-3 rounded-xl border border-gray-600" placeholder="e.g. 175">
        <div id="height-error" class="error-message hidden"></div>

        <div class="flex justify-end mt-6">
          <button type="button" onclick="nextStep()" class="bg-[#F2B33D] text-black px-6 py-2 rounded-full hover:bg-yellow-400 transition">Next</button>
        </div>
      </div>

      <!-- Step 2 -->
      <div class="step hidden" id="step2">
        <label class="block mb-2 text-sm">What's your primary goal?</label>
        <div class="dropdown-container">
          <button type="button" class="dropdown-button" onclick="toggleDropdown('goal')">
            <span id="goal-display">Select goal</span>
            <span class="text-gray-400">⌄</span>
          </button>
          <div id="goal-dropdown" class="dropdown-options hidden">
            <div class="dropdown-option" onclick="selectDropdownOption('goal', 'Lose weight')">Lose weight</div>
            <div class="dropdown-option" onclick="selectDropdownOption('goal', 'Gain muscle')">Gain muscle</div>
            <div class="dropdown-option" onclick="selectDropdownOption('goal', 'Improve flexibility')">Improve flexibility</div>
            <div class="dropdown-option" onclick="selectDropdownOption('goal', 'Stay active')">Stay active</div>
          </div>
        </div>
        <div id="goal-error" class="error-message hidden"></div>
        <div class="flex justify-between mt-6">
          <button type="button" onclick="previousStep()" class="bg-gray-600 text-white px-6 py-2 rounded-full hover:bg-gray-500 transition">Back</button>
          <button type="button" onclick="nextStep()" class="bg-[#F2B33D] text-black px-6 py-2 rounded-full hover:bg-yellow-400 transition">Next</button>
        </div>
      </div>

      <!-- Step 3: Senior-specific -->
      <div class="step hidden" id="senior-extra">
        <label class="block mb-2 text-sm">Do you have concerns about any of the following?</label>
        <div class="dropdown-container">
          <button type="button" class="dropdown-button" onclick="toggleDropdown('healthFocus')">
            <span id="healthFocus-display">Select health focus</span>
            <span class="text-gray-400">⌄</span>
          </button>
          <div id="healthFocus-dropdown" class="dropdown-options hidden">
            <div class="dropdown-option" onclick="selectDropdownOption('healthFocus', 'Bone strength')">Bone strength</div>
            <div class="dropdown-option" onclick="selectDropdownOption('healthFocus', 'Eye health')">Eye health</div>
            <div class="dropdown-option" onclick="selectDropdownOption('healthFocus', 'Joint mobility')">Joint mobility</div>
            <div class="dropdown-option" onclick="selectDropdownOption('healthFocus', 'Cholesterol/Blood pressure')">Cholesterol/Blood pressure</div>
            <div class="dropdown-option" onclick="selectDropdownOption('healthFocus', 'Other')">Other</div>
          </div>
        </div>
        <div id="healthFocus-error" class="error-message hidden"></div>

        <input id="otherHealthFocus" type="text" placeholder="Please specify..." class="mt-3 w-full p-3 rounded-xl border border-gray-600 hidden">
        <div id="otherHealthFocus-error" class="error-message hidden"></div>

        <div class="flex justify-between mt-6">
          <button type="button" onclick="previousStep()" class="bg-gray-600 text-white px-6 py-2 rounded-full hover:bg-gray-500 transition">Back</button>
          <button type="button" onclick="nextStep()" class="bg-[#F2B33D] text-black px-6 py-2 rounded-full hover:bg-yellow-400 transition">Next</button>
        </div>
      </div>

      <!-- Step 4 -->
      <div class="step hidden" id="step3">
        <label class="block mb-2 text-sm">Preferred type of workout</label>
        <div class="dropdown-container">
          <button type="button" class="dropdown-button" onclick="toggleDropdown('workoutType')">
            <span id="workoutType-display">Select workout type</span>
            <span class="text-gray-400">⌄</span>
          </button>
          <div id="workoutType-dropdown" class="dropdown-options hidden">
            <div class="dropdown-option" onclick="selectDropdownOption('workoutType', 'Calisthenics')">Calisthenics</div>
            <div class="dropdown-option" onclick="selectDropdownOption('workoutType', 'Yoga')">Yoga</div>
            <div class="dropdown-option" onclick="selectDropdownOption('workoutType', 'Weight training')">Weight training</div>
            <div class="dropdown-option" onclick="selectDropdownOption('workoutType', 'Mixed')">Mixed</div>
          </div>
        </div>
        <div id="workoutType-error" class="error-message hidden"></div>
        <div class="flex justify-between mt-6">
          <button type="button" onclick="previousStep()" class="bg-gray-600 text-white px-6 py-2 rounded-full hover:bg-gray-500 transition">Back</button>
          <button type="button" onclick="nextStep()" class="bg-[#F2B33D] text-black px-6 py-2 rounded-full hover:bg-yellow-400 transition">Next</button>
        </div>
      </div>

      <!-- Step 5: Dietary Preferences -->
      <div class="step hidden" id="step4">
        <label class="block mb-2 text-sm">Any dietary preferences?</label>
        <div class="dropdown-container">
          <button type="button" class="dropdown-button" onclick="toggleDropdown('dietaryPreferences')">
            <span id="dietaryPreferences-display">Select dietary preference</span>
            <span class="text-gray-400">⌄</span>
          </button>
          <div id="dietaryPreferences-dropdown" class="dropdown-options hidden">
            <div class="dropdown-option" onclick="selectDropdownOption('dietaryPreferences', 'None')">None</div>
            <div class="dropdown-option" onclick="selectDropdownOption('dietaryPreferences', 'Vegetarian')">Vegetarian</div>
            <div class="dropdown-option" onclick="selectDropdownOption('dietaryPreferences', 'Vegan')">Vegan</div>
            <div class="dropdown-option" onclick="selectDropdownOption('dietaryPreferences', 'Gluten-free')">Gluten-free</div>
            <div class="dropdown-option" onclick="selectDropdownOption('dietaryPreferences', 'Dairy-free')">Dairy-free</div>
            <div class="dropdown-option" onclick="selectDropdownOption('dietaryPreferences', 'Low-carb')">Low-carb</div>
            <div class="dropdown-option" onclick="selectDropdownOption('dietaryPreferences', 'Keto')">Keto</div>
            <div class="dropdown-option" onclick="selectDropdownOption('dietaryPreferences', 'Other')">Other</div>
          </div>
        </div>
        <div id="dietaryPreferences-error" class="error-message hidden"></div>

        <input id="otherDietaryPreferences" type="text" placeholder="Please specify..." class="mt-3 w-full p-3 rounded-xl border border-gray-600 hidden">
        <div id="otherDietaryPreferences-error" class="error-message hidden"></div>

        <div class="flex justify-between mt-6">
          <button type="button" onclick="previousStep()" class="bg-gray-600 text-white px-6 py-2 rounded-full hover:bg-gray-500 transition">Back</button>
          <button type="button" onclick="finish()" class="bg-[#F2B33D] text-black px-6 py-2 rounded-full hover:bg-yellow-400 transition">Finish</button>
        </div>
      </div>

      <!-- Completion -->
      <div class="step hidden text-center" id="completed">
        <h2 class="text-xl font-bold text-[#62E0A1]">You're all set!</h2>
        <p class="text-gray-400 mt-2">Redirecting you to your profile page...</p>
      </div>
    </div>
  </div>

  <script>
    let currentStep = 1;
    const progressBar = document.getElementById("progress");
    let dropdownValues = {};

    // Close dropdowns when clicking outside
    document.addEventListener('click', function(event) {
      const dropdowns = document.querySelectorAll('.dropdown-options');
      dropdowns.forEach(dropdown => {
        if (!dropdown.contains(event.target) && !event.target.classList.contains('dropdown-button')) {
          dropdown.classList.add('hidden');
        }
      });
    });

    function toggleDropdown(id) {
      const dropdown = document.getElementById(id + '-dropdown');
      const allDropdowns = document.querySelectorAll('.dropdown-options');
      
      // Close all other dropdowns
      allDropdowns.forEach(d => {
        if (d !== dropdown) {
          d.classList.add('hidden');
        }
      });
      
      dropdown.classList.toggle('hidden');
    }

    function selectDropdownOption(id, value) {
      document.getElementById(id + '-display').textContent = value;
      dropdownValues[id] = value;
      document.getElementById(id + '-dropdown').classList.add('hidden');
      hideError(id + '-error');
      
      // Handle "Other" option for health focus
      if (id === 'healthFocus' && value === 'Other') {
        document.getElementById('otherHealthFocus').classList.remove('hidden');
      } else if (id === 'healthFocus') {
        document.getElementById('otherHealthFocus').classList.add('hidden');
      }
      
      // Handle "Other" option for dietary preferences
      if (id === 'dietaryPreferences' && value === 'Other') {
        document.getElementById('otherDietaryPreferences').classList.remove('hidden');
      } else if (id === 'dietaryPreferences') {
        document.getElementById('otherDietaryPreferences').classList.add('hidden');
      }
    }

    function isSenior() {
      return dropdownValues.age === "46–60" || dropdownValues.age === "60+";
    }

    function showError(elementId, message) {
      const errorElement = document.getElementById(elementId);
      errorElement.textContent = message;
      errorElement.classList.remove("hidden");
    }

    function hideError(elementId) {
      const errorElement = document.getElementById(elementId);
      errorElement.classList.add("hidden");
    }

    function validateStep1() {
      let isValid = true;
      
      // Validate name
      const name = document.getElementById("name").value.trim();
      if (!name) {
        showError("name-error", "Name is required");
        isValid = false;
      } else {
        hideError("name-error");
      }

      // Validate age
      const age = dropdownValues.age;
      if (!age) {
        showError("age-error", "Please select your age range");
        isValid = false;
      } else {
        hideError("age-error");
      }

      // Validate weight
      const weight = document.getElementById("weight").value;
      if (!weight) {
        showError("weight-error", "Weight is required");
        isValid = false;
      } else if (weight < 20 || weight > 300) {
        showError("weight-error", "Please enter a valid weight (20-300 kg)");
        isValid = false;
      } else {
        hideError("weight-error");
      }

      // Validate height
      const height = document.getElementById("height").value;
      if (!height) {
        showError("height-error", "Height is required");
        isValid = false;
      } else if (height < 100 || height > 250) {
        showError("height-error", "Please enter a valid height (100-250 cm)");
        isValid = false;
      } else {
        hideError("height-error");
      }

      return isValid;
    }

    function validateStep2() {
      const goal = dropdownValues.goal;
      if (!goal) {
        showError("goal-error", "Please select your primary goal");
        return false;
      } else {
        hideError("goal-error");
        return true;
      }
    }

    function validateSeniorExtra() {
      const healthFocus = dropdownValues.healthFocus;
      if (!healthFocus) {
        showError("healthFocus-error", "Please select a health focus");
        return false;
      } else {
        hideError("healthFocus-error");
      }

      // If "Other" is selected, validate the text input
      if (healthFocus === "Other") {
        const otherHealthFocus = document.getElementById("otherHealthFocus").value.trim();
        if (!otherHealthFocus) {
          showError("otherHealthFocus-error", "Please specify your health concern");
          return false;
        } else {
          hideError("otherHealthFocus-error");
        }
      } else {
        hideError("otherHealthFocus-error");
      }

      return true;
    }

    function validateStep3() {
      const workoutType = dropdownValues.workoutType;
      if (!workoutType) {
        showError("workoutType-error", "Please select your preferred workout type");
        return false;
      } else {
        hideError("workoutType-error");
        return true;
      }
    }

    function validateStep4() {
      const dietaryPreferences = dropdownValues.dietaryPreferences;
      if (!dietaryPreferences) {
        showError("dietaryPreferences-error", "Please select your dietary preference");
        return false;
      } else {
        hideError("dietaryPreferences-error");
      }

      // If "Other" is selected, validate the text input
      if (dietaryPreferences === "Other") {
        const otherDietaryPreferences = document.getElementById("otherDietaryPreferences").value.trim();
        if (!otherDietaryPreferences) {
          showError("otherDietaryPreferences-error", "Please specify your dietary preference");
          return false;
        } else {
          hideError("otherDietaryPreferences-error");
        }
      } else {
        hideError("otherDietaryPreferences-error");
      }

      return true;
    }

    function nextStep() {
      let isValid = false;

      // Validate current step
      if (currentStep === 1) {
        isValid = validateStep1();
      } else if (currentStep === 2) {
        isValid = validateStep2();
      } else if (currentStep === 3) {
        isValid = validateSeniorExtra();
      } else if (currentStep === 4) {
        isValid = validateStep3();
      } else if (currentStep === 5) {
        isValid = validateStep4();
      }

      if (!isValid) return;

      const senior = isSenior();
      // Hide current step
      if (currentStep === 1) {
        document.getElementById("step1").classList.add("hidden");
        document.getElementById("step2").classList.remove("hidden");
        currentStep = 2;
      } else if (currentStep === 2) {
        if (senior) {
          document.getElementById("step2").classList.add("hidden");
          document.getElementById("senior-extra").classList.remove("hidden");
          currentStep = 3;
        } else {
          document.getElementById("step2").classList.add("hidden");
          document.getElementById("step3").classList.remove("hidden");
          currentStep = 4;
        }
      } else if (currentStep === 3) {
        document.getElementById("senior-extra").classList.add("hidden");
        document.getElementById("step3").classList.remove("hidden");
        currentStep = 4;
      } else if (currentStep === 4) {
        document.getElementById("step3").classList.add("hidden");
        document.getElementById("step4").classList.remove("hidden");
        currentStep = 5;
      }
      updateProgress();
    }

    function previousStep() {
      const senior = isSenior();
      // Hide current step
      if (currentStep === 2) {
        document.getElementById("step2").classList.add("hidden");
        document.getElementById("step1").classList.remove("hidden");
        currentStep = 1;
      } else if (currentStep === 3) {
        document.getElementById("senior-extra").classList.add("hidden");
        document.getElementById("step2").classList.remove("hidden");
        currentStep = 2;
      } else if (currentStep === 4) {
        document.getElementById("step3").classList.add("hidden");
        if (senior) {
          document.getElementById("senior-extra").classList.remove("hidden");
          currentStep = 3;
        } else {
          document.getElementById("step2").classList.remove("hidden");
          currentStep = 2;
        }
      } else if (currentStep === 5) {
        document.getElementById("step4").classList.add("hidden");
        document.getElementById("step3").classList.remove("hidden");
        currentStep = 4;
      }
      updateProgress();
    }

    function updateProgress() {
      const senior = isSenior();
      let percent = 0;
      if (senior) {
        // 5 steps: 1,2,3(senior),4,5
        if (currentStep === 1) percent = 0;
        else if (currentStep === 2) percent = 20;
        else if (currentStep === 3) percent = 40;
        else if (currentStep === 4) percent = 60;
        else if (currentStep === 5) percent = 80;
      } else {
        // 4 steps: 1,2,4,5
        if (currentStep === 1) percent = 0;
        else if (currentStep === 2) percent = 25;
        else if (currentStep === 4) percent = 50;
        else if (currentStep === 5) percent = 75;
      }
      progressBar.style.width = `${percent}%`;
    }

    function finish() {
      if (!validateStep4()) return;
      
      document.getElementById("step4").classList.add("hidden");
      document.getElementById("completed").classList.remove("hidden");
      progressBar.style.width = "100%";
      setTimeout(() => {
        window.location.href = "profile.html";
      }, 2000);
    }
  </script>
</body>
</html>
