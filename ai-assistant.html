<!-- Floating AI Assistant Button & Chat -->
<div id="ai-assistant-box" class="fixed bottom-8 right-8 bg-[#1E1E1E] border-4 border-[#62E0A1] rounded-full shadow-xl w-16 h-16 flex items-center justify-center hover:shadow-2xl transition-all z-50 cursor-pointer group">
  <img src="https://img.icons8.com/fluency/96/chatbot.png" alt="AI Assistant Icon" class="w-10 h-10 animate-bounce-slow group-hover:scale-110 transition-transform duration-300" />
</div>
<div id="ai-assistant-popup" class="hidden fixed bottom-28 right-8 w-80 max-w-full bg-[#181f1b] border-2 border-[#62E0A1] rounded-2xl shadow-2xl z-50 flex flex-col" style="min-height: 400px;">
  <div class="flex items-center justify-between px-4 py-2 border-b border-[#62E0A1] rounded-t-2xl bg-[#1E1E1E]">
    <span class="font-bold text-custom-primary">AI Assistant</span>
    <button id="ai-assistant-close" class="text-gray-400 hover:text-custom-accent text-xl font-bold">&times;</button>
  </div>
  <div class="flex-1 p-4 overflow-y-auto text-gray-200" id="ai-assistant-messages">
    <div class="text-center text-gray-400 mt-8">How can I help you today?</div>
  </div>
  <form id="ai-assistant-form" class="flex items-center border-t border-[#62E0A1] p-2 bg-[#1E1E1E] rounded-b-2xl">
    <input type="text" id="ai-assistant-input" class="flex-1 bg-transparent text-white px-3 py-2 rounded-full focus:outline-none" placeholder="Type your question..." autocomplete="off" />
    <button type="submit" class="ml-2 bg-custom-primary text-black px-4 py-2 rounded-full font-bold hover:bg-custom-secondary transition">Send</button>
  </form>
</div>

<style>
  @keyframes bounce-slow {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-6px);
    }
  }
  .animate-bounce-slow {
    animation: bounce-slow 2s infinite;
  }
  /* Universal override to ensure AI assistant floats above all content */
  #ai-assistant-box, #ai-assistant-popup {
    position: fixed !important;
    z-index: 2147483647 !important;
    pointer-events: auto;
  }
</style>

<script>
  // Show/hide popup logic (match homepage)
  setTimeout(() => {
    const aiBox = document.getElementById('ai-assistant-box');
    const aiPopup = document.getElementById('ai-assistant-popup');
    const aiClose = document.getElementById('ai-assistant-close');
    const aiForm = document.getElementById('ai-assistant-form');
    const aiInput = document.getElementById('ai-assistant-input');
    const aiMessages = document.getElementById('ai-assistant-messages');
    let popupOpen = false;
    function openPopup() {
      aiPopup.classList.remove('hidden');
      popupOpen = true;
    }
    function closePopup() {
      aiPopup.classList.add('hidden');
      popupOpen = false;
    }
    aiBox.addEventListener('click', (e) => {
      if (popupOpen) {
        closePopup();
      } else {
        openPopup();
      }
    });
    aiClose.addEventListener('click', closePopup);
    document.addEventListener('mousedown', (event) => {
      if (popupOpen && !aiPopup.contains(event.target) && !aiBox.contains(event.target)) {
        closePopup();
      }
    });
    aiForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const userMsg = aiInput.value.trim();
      if (!userMsg) return;
      // Show user message
      const userDiv = document.createElement('div');
      userDiv.className = "text-right";
      userDiv.innerHTML = `<span class="bg-custom-primary text-black px-2 py-1 rounded-lg inline-block">${userMsg}</span>`;
      aiMessages.appendChild(userDiv);
      aiMessages.scrollTop = aiMessages.scrollHeight;
      aiInput.value = "";
      // Simulate AI reply
      setTimeout(() => {
        const aiDiv = document.createElement('div');
        aiDiv.innerHTML = `<span class="bg-custom-surface border border-custom-primary text-custom-primary px-2 py-1 rounded-lg inline-block">I'm here to help! (AI response placeholder)</span>`;
        aiMessages.appendChild(aiDiv);
        aiMessages.scrollTop = aiMessages.scrollHeight;
      }, 800);
    });
  }, 100);
</script>