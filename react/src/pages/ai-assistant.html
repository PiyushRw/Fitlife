<!-- Floating AI Assistant Button & Chat -->
<div id="ai-assistant-box" class="fixed bottom-8 right-8 bg-[#1E1E1E] border-4 border-[#62E0A1] rounded-full shadow-xl w-16 h-16 flex items-center justify-center hover:shadow-2xl transition-all z-50 cursor-pointer group">
  <img src="https://img.icons8.com/fluency/96/chatbot.png" alt="AI Assistant Icon" class="w-10 h-10 animate-bounce-slow group-hover:scale-110 transition-transform duration-300" />
</div>
<!-- Soft AI Chat Box (new design) -->
<div id="aiBox" class="hidden fixed bottom-32 right-6 bg-[#1E1E1E]/95 backdrop-blur-md border border-[#2a2a2a] rounded-2xl shadow-2xl w-[430px] max-w-full min-h-[450px] p-5 animate-soft-open z-50 flex flex-col">
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center gap-2">
      <i class="fas fa-robot text-[#62E0A1] text-xl"></i>
      <h3 class="text-lg font-semibold">FitLife AI Companion</h3>
    </div>
    <button id="closeBtn" class="text-gray-400 hover:text-red-400 transition text-xl">&times;</button>
  </div>
  <!-- Ongoing Chat Area -->
  <div id="chatArea" class="flex-1 overflow-y-auto my-2 px-1" style="max-height: 270px;">
    <div class="flex gap-2 items-start mb-3">
      <i class="fas fa-robot text-[#62E0A1] text-lg mt-1"></i>
      <div class="bg-[#222] text-custom-primary px-4 py-2 rounded-xl max-w-[80%] shadow">Hi there! How can I help you with your fitness goals today?</div>
    </div>
    <div class="flex gap-2 items-start justify-end mb-3">
      <div class="bg-[#62E0A1] text-black px-4 py-2 rounded-xl max-w-[80%] shadow ml-auto">What's a good post-workout meal?</div>
      <span class="text-2xl">ðŸ§‘</span>
    </div>
    <div class="flex gap-2 items-start mb-3">
      <i class="fas fa-robot text-[#62E0A1] text-lg mt-1"></i>
      <div class="bg-[#222] text-custom-primary px-4 py-2 rounded-xl max-w-[80%] shadow">A balanced post-workout meal includes protein and carbs. For example, grilled chicken with brown rice and veggies!</div>
    </div>
    <div class="flex gap-2 items-start justify-end mb-3">
      <div class="bg-[#62E0A1] text-black px-4 py-2 rounded-xl max-w-[80%] shadow ml-auto">Thank you! And how often should I do cardio?</div>
      <span class="text-2xl">ðŸ§‘</span>
    </div>
    <div class="flex gap-2 items-start mb-3">
      <i class="fas fa-robot text-[#62E0A1] text-lg mt-1"></i>
      <div class="bg-[#222] text-custom-primary px-4 py-2 rounded-xl max-w-[80%] shadow">Aim for at least 150 minutes of moderate cardio per week, like brisk walking or cycling.</div>
    </div>
  </div>
  <!-- Ask Question Form at the bottom -->
  <form class="flex gap-2 pt-2 border-t border-[#2a2a2a] bg-transparent">
    <input type="text" placeholder="Ask a question..." class="flex-1 px-4 py-2 rounded-lg bg-[#1a1a1a] border border-[#62E0A1] focus:outline-none text-white"/>
    <button type="submit" class="bg-[#62E0A1] text-black px-4 py-2 rounded-lg font-semibold hover:bg-[#36CFFF] transition">
      <i class="fas fa-paper-plane"></i>
    </button>
  </form>
</div>
<style>
  @keyframes bounce-slow {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-6px);
    }
  }
  .animate-bounce-slow {
    animation: bounce-slow 2s infinite;
  }
  @keyframes softSlideFade {
    from {
      opacity: 0;
      transform: translateY(10px) scale(0.98);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  .animate-soft-open {
    animation: softSlideFade 0.3s ease-out forwards;
  }
  /* Custom scrollbar for chat area */
  #chatArea::-webkit-scrollbar {
    width: 10px;
    background: #111;
  }
  #chatArea::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 8px;
  }
  #chatArea::-webkit-scrollbar-thumb:hover {
    background: #444;
  }
  #chatArea {
    scrollbar-width: thin;
    scrollbar-color: #333 #111;
  }
</style>
<script>
  // Show/hide new soft chat box
  const aiBtn = document.getElementById('ai-assistant-box');
  const aiBox = document.getElementById('aiBox');
  const closeBtn = document.getElementById('closeBtn');
  let boxOpen = false;
  aiBtn.addEventListener('click', (e) => {
    e.preventDefault();
    if (boxOpen) {
      aiBox.classList.add('hidden');
      boxOpen = false;
    } else {
      aiBox.classList.remove('hidden');
      aiBox.classList.add('animate-soft-open');
      boxOpen = true;
    }
  });
  closeBtn.addEventListener('click', () => {
    aiBox.classList.add('hidden');
    boxOpen = false;
  });
  // Hide chatbox if clicking outside
  document.addEventListener('mousedown', (event) => {
    if (boxOpen && !aiBox.contains(event.target) && !aiBtn.contains(event.target)) {
      aiBox.classList.add('hidden');
      boxOpen = false;
    }
  });
</script>