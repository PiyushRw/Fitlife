<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Companion Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
  <style>
    .bg-custom-dark { background-color: #121212; }
    .bg-custom-surface { background-color: #1E1E1E; }
    .bg-custom-primary { background-color: #62E0A1; }
    .bg-custom-secondary { background-color: #36CFFF; }
    .bg-custom-accent { background-color: #F2B33D; }
    .text-custom-primary { color: #62E0A1; }
    .text-custom-secondary { color: #36CFFF; }
    .text-custom-accent { color: #F2B33D; }
    .border-custom-surface { border-color: #1E1E1E; }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
  </style>
</head>
<body class="bg-custom-dark text-white min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-custom-surface p-4 flex items-center gap-3 shadow">
    <span class="text-3xl">ðŸ¤–</span>
    <h1 class="text-xl font-bold text-custom-primary">AI Companion</h1>
    <span class="ml-auto text-xs text-gray-400">Chat, upload docs, or images for smart help!</span>
  </header>
  <!-- Chat Area -->
  <main class="flex-1 flex flex-col items-center justify-center px-2 py-6">
    <div id="chatWindow" class="w-full max-w-2xl flex-1 bg-custom-surface rounded-2xl shadow-lg p-4 flex flex-col gap-3 overflow-y-auto scrollbar-hide" style="min-height:400px; max-height:60vh;">
      <!-- Example messages -->
      <div class="flex gap-2 items-start">
        <span class="text-2xl">ðŸ¤–</span>
        <div class="bg-custom-surface border border-custom-primary text-custom-primary px-4 py-2 rounded-xl max-w-[80%] shadow">
          Hi! Paste an image, upload a document, or ask me anything.
        </div>
      </div>
    </div>
    <!-- Typing indicator -->
    <div id="userTypingIndicator" class="w-full max-w-2xl flex justify-end mt-1" style="display:none;">
      <div class="flex items-center gap-1">
        <div class="bg-custom-primary text-black px-3 py-1 rounded-xl shadow flex items-center">
          <span class="typing-dots"><span>.</span><span>.</span><span>.</span></span>
        </div>
        <span class="text-2xl">ðŸ§‘</span>
      </div>
    </div>
    <!-- Input Area -->
    <form id="chatForm" class="w-full max-w-2xl flex items-center gap-2 mt-4">
      <label for="fileInput" class="cursor-pointer flex items-center justify-center w-10 h-10 rounded-full bg-custom-accent text-black hover:bg-yellow-400 transition">
        <span class="text-lg">âœ¨</span>
        <input id="fileInput" type="file" accept="image/*,.pdf,.doc,.docx" class="hidden" multiple>
      </label>
      <input id="chatInput" type="text" placeholder="Type your message..." class="flex-1 bg-custom-surface border border-custom-primary rounded-xl px-4 py-2 text-white focus:outline-none" autocomplete="off"/>
      <button type="submit" class="bg-custom-primary text-black px-5 py-2 rounded-xl font-bold hover:bg-custom-secondary transition flex items-center gap-2">
        <span>Send</span>
        <i class="fas fa-paper-plane"></i>
      </button>
    </form>
    <!-- Preview for images/docs -->
    <div id="filePreview" class="w-full max-w-2xl mt-2 flex flex-wrap gap-2"></div>
  </main>
  <script>
    // UI only: handle file preview and chat bubbles
    const chatWindow = document.getElementById('chatWindow');
    const chatForm = document.getElementById('chatForm');
    const chatInput = document.getElementById('chatInput');
    const fileInput = document.getElementById('fileInput');
    const filePreview = document.getElementById('filePreview');

    // Helper to add/remove typing indicator inside chat window
    function showUserTypingBubble(show) {
      let typingBubble = document.getElementById('userTypingBubble');
      if (show) {
        if (!typingBubble) {
          typingBubble = document.createElement('div');
          typingBubble.id = 'userTypingBubble';
          typingBubble.className = "flex gap-2 items-start justify-end animate-fade-in";
          typingBubble.innerHTML = `
            <div class="bg-custom-primary text-black px-4 py-2 rounded-xl max-w-[80%] shadow flex items-center gap-2">
              <span class="typing-dots"><span>.</span><span>.</span><span>.</span></span>
            </div>
            <span class="text-2xl">ðŸ§‘</span>
          `;
          chatWindow.appendChild(typingBubble);
          chatWindow.scrollTop = chatWindow.scrollHeight;
        }
      } else {
        if (typingBubble) typingBubble.remove();
      }
    }

    // Show typing indicator when typing
    chatInput.addEventListener('input', () => {
      showUserTypingBubble(chatInput.value.trim().length > 0);
    });

    fileInput.addEventListener('change', () => {
      filePreview.innerHTML = '';
      Array.from(fileInput.files).forEach(file => {
        let el;
        if (file.type.startsWith('image/')) {
          el = document.createElement('img');
          el.src = URL.createObjectURL(file);
          el.className = "w-16 h-16 object-cover rounded-lg border-2 border-custom-accent";
        } else {
          el = document.createElement('div');
          el.className = "flex items-center gap-2 bg-custom-surface border border-custom-accent px-2 py-1 rounded-lg text-xs";
          el.innerHTML = `<i class="fas fa-file-alt text-custom-accent"></i> ${file.name}`;
        }
        filePreview.appendChild(el);
      });
    });

    chatForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const msg = chatInput.value.trim();
      if (!msg && fileInput.files.length === 0) return;

      // Hide typing indicator
      showUserTypingBubble(false);

      // User message bubble (right side)
      if (msg) {
        const userDiv = document.createElement('div');
        userDiv.className = "flex gap-2 items-start justify-end animate-fade-in";
        userDiv.innerHTML = `
          <div class="bg-custom-primary text-black px-4 py-2 rounded-xl max-w-[80%] shadow text-right">${msg}</div>
          <span class="text-2xl">ðŸ§‘</span>
        `;
        chatWindow.appendChild(userDiv);
      }

      // File bubbles (right side)
      Array.from(fileInput.files).forEach(file => {
        let el;
        if (file.type.startsWith('image/')) {
          el = document.createElement('div');
          el.className = "flex gap-2 items-start justify-end animate-fade-in";
          el.innerHTML = `
            <img src="${URL.createObjectURL(file)}" class="w-24 h-24 object-cover rounded-xl border-2 border-custom-accent" alt="uploaded image"/>
            <span class="text-2xl">ðŸ§‘</span>
          `;
        } else {
          el = document.createElement('div');
          el.className = "flex gap-2 items-start justify-end animate-fade-in";
          el.innerHTML = `
            <div class="bg-custom-surface border border-custom-accent text-custom-accent px-4 py-2 rounded-xl max-w-[80%] shadow flex items-center gap-2">
              <i class="fas fa-file-alt"></i> ${file.name}
            </div>
            <span class="text-2xl">ðŸ§‘</span>
          `;
        }
        chatWindow.appendChild(el);
      });

      // Clear input and preview
      chatInput.value = '';
      fileInput.value = '';
      filePreview.innerHTML = '';

      // Simulate AI reply
      setTimeout(() => {
        const aiDiv = document.createElement('div');
        aiDiv.className = "flex gap-2 items-start animate-fade-in";
        aiDiv.innerHTML = `<span class="text-2xl">ðŸ¤–</span>
          <div class="bg-custom-surface border border-custom-primary text-custom-primary px-4 py-2 rounded-xl max-w-[80%] shadow">
            <span class="typing-dots"><span>.</span><span>.</span><span>.</span></span>
          </div>`;
        chatWindow.appendChild(aiDiv);
        chatWindow.scrollTop = chatWindow.scrollHeight;
        setTimeout(() => {
          aiDiv.querySelector('.typing-dots').innerHTML = "I'm here to help! (AI response placeholder)";
        }, 1200);
      }, 400);

      chatWindow.scrollTop = chatWindow.scrollHeight;
    });

    // Animations
    const style = document.createElement('style');
    style.innerHTML = `
      @keyframes fade-in {
        from { opacity: 0; transform: translateY(10px);}
        to { opacity: 1; transform: translateY(0);}
      }
      .animate-fade-in {
        animation: fade-in 0.3s;
      }
      .typing-dots span {
        animation: blink 1.4s infinite both;
        opacity: 0.5;
        font-size: 1.2em;
        margin-right: 1px;
      }
      .typing-dots span:nth-child(2) { animation-delay: 0.2s;}
      .typing-dots span:nth-child(3) { animation-delay: 0.4s;}
      @keyframes blink {
        0%, 80%, 100% { opacity: 0.2; }
        40% { opacity: 1; }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>